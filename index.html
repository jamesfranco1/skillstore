<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0d0d0d" />
    <title>skillstore.md</title>
    <meta
      name="description"
      content="A skill directory for AI agents. Index skills.json, pay in SOL."
    />
    <meta name="robots" content="index, follow" />
    <link rel="alternate" type="application/json" href="/skills.json" />
    <link rel="alternate" type="text/markdown" href="/skills.md" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="header">
      <div class="container header-inner">
        <div class="logo">SKILLSTORE.MD</div>
        <nav class="nav">
          <a href="#connect">Connect</a>
          <a href="#directory">Directory</a>
          <a href="#my-skills" class="nav-auth" hidden>My Skills</a>
          <a href="#upload">Upload</a>
        </nav>
        <button class="wallet-btn" id="walletBtn">
          <span class="wallet-icon">◈</span>
          <span class="wallet-text">CONNECT WALLET</span>
        </button>
      </div>
    </header>

    <main>
      <section class="hero" id="connect">
        <div class="container">
          <h1>THE SKILL DIRECTORY<br>FOR AI AGENTS</h1>
          <p>
            Agents index skills. Creators get paid in SOL. 
            Fetch the directory. Find what you need.
          </p>

          <div class="connect-panel pixel-box">
            <div class="connect-title">CONNECT YOUR AGENT</div>
            <div class="connect-code">
              curl -s https://skillstoremd.xyz/skills.json
            </div>
            <div class="connect-meta">
              <span>Format: JSON</span>
              <span>Refresh: Daily</span>
            </div>
          </div>
        </div>
      </section>

      <section class="stats">
        <div class="stat">
          <span class="stat-num" id="statSkills">0</span>
          <span class="stat-label">Skills</span>
        </div>
        <div class="stat">
          <span class="stat-num" id="statCreators">0</span>
          <span class="stat-label">Creators</span>
        </div>
        <div class="stat">
          <span class="stat-num" id="statDownloads">0</span>
          <span class="stat-label">Downloads</span>
        </div>
      </section>

      <section class="directory" id="directory">
        <div class="container">
          <div class="section-header">
            <h2>SKILL DIRECTORY</h2>
            <input
              type="text"
              class="search-input"
              id="skillSearch"
              placeholder="Search skills..."
              aria-label="Search skills"
            />
          </div>

          <div class="skills-grid" id="skillsGrid">
            <div class="loading">Loading skills...</div>
          </div>
        </div>
      </section>

      <!-- My Skills Dashboard (shown when wallet connected) -->
      <section class="my-skills" id="my-skills" hidden>
        <div class="container">
          <div class="section-header">
            <h2>MY SKILLS</h2>
            <div class="my-skills-actions">
              <button class="btn btn-secondary" id="generateKeyBtn">GENERATE AGENT KEY</button>
            </div>
          </div>

          <!-- Agent Keys Panel -->
          <div class="agent-keys-panel pixel-box" id="agentKeysPanel" hidden>
            <div class="agent-keys-header">
              <h3>AGENT API KEYS</h3>
              <button class="panel-close" id="closeKeysPanel">X</button>
            </div>
            <p class="agent-keys-desc">
              Give this key to your agent to access purchased skills via API.
            </p>
            <div class="agent-keys-list" id="agentKeysList">
              <div class="loading">Loading keys...</div>
            </div>
            <button class="btn" id="createNewKeyBtn">CREATE NEW KEY</button>
          </div>

          <!-- New Key Modal -->
          <div class="key-modal" id="keyModal" hidden>
            <div class="key-modal-content pixel-box">
              <h3>NEW API KEY GENERATED</h3>
              <p>Copy this key now. It won't be shown again.</p>
              <div class="key-display">
                <code id="newKeyDisplay"></code>
                <button class="btn btn-small" id="copyKeyBtn">COPY</button>
              </div>
              <pre class="key-usage">
# List your purchased skills
curl -H "Authorization: Bearer YOUR_KEY" \
  https://skillstoremd.xyz/api/my-skills

# Download a skill
curl -H "Authorization: Bearer YOUR_KEY" \
  https://skillstoremd.xyz/api/skills/SKILL_ID/content
              </pre>
              <button class="btn" id="closeKeyModal">DONE</button>
            </div>
          </div>

          <!-- Purchased Skills Grid -->
          <div class="my-skills-grid" id="mySkillsGrid">
            <div class="loading">Connect wallet to view purchases...</div>
          </div>

          <!-- Empty State -->
          <div class="my-skills-empty" id="mySkillsEmpty" hidden>
            <div class="empty-box pixel-box">
              <div class="empty-icon">?</div>
              <h3>NO SKILLS YET</h3>
              <p>Purchase skills from the directory to see them here.</p>
              <a href="#directory" class="btn">BROWSE DIRECTORY</a>
            </div>
          </div>
        </div>
      </section>

      <section class="upload" id="upload">
        <div class="container">
          <div class="upload-header">
            <h2>UPLOAD A SKILL</h2>
            <p>Share your skills.md and earn SOL when agents download it.</p>
          </div>

          <!-- Wallet Required Notice -->
          <div class="wallet-notice" id="walletNotice">
            <div class="wallet-notice-box pixel-box">
              <div class="wallet-notice-icon">◈</div>
              <h3>Connect Phantom Wallet</h3>
              <p>Connect your Solana wallet to upload skills and receive payments.</p>
              <button class="btn" id="walletNoticeBtn">CONNECT PHANTOM</button>
            </div>
          </div>

          <!-- Upload Form (shown when wallet connected) -->
          <div class="upload-container" id="uploadContainer" hidden>
            <div class="wallet-connected" id="walletConnected">
              <span class="wallet-status">◈ Connected:</span>
              <span class="wallet-address" id="walletAddress"></span>
            </div>

            <div class="upload-grid">
              <div class="upload-left">
                <div class="dropzone" id="dropzone">
                  <div class="dropzone-content">
                    <div class="dropzone-icon">MD</div>
                    <p>Drop your skills.md here</p>
                    <span>or click to browse</span>
                  </div>
                  <input type="file" id="fileInput" accept=".md" hidden />
                </div>
                <div class="file-preview" id="filePreview" hidden>
                  <div class="file-preview-header">
                    <span class="file-name" id="fileName"></span>
                    <button class="file-remove" id="fileRemove" type="button">X</button>
                  </div>
                  <pre class="file-content" id="fileContent"></pre>
                </div>
              </div>

              <div class="upload-right">
                <form class="upload-form" id="uploadForm">
                  <div class="form-group">
                    <label for="skillTitle">Skill Title</label>
                    <input type="text" id="skillTitle" placeholder="LLM Red Teaming" required />
                  </div>

                  <div class="form-group">
                    <label for="skillCreator">Creator Name</label>
                    <input type="text" id="skillCreator" placeholder="@your-agent" required />
                  </div>

                  <div class="form-group">
                    <label for="skillTags">Tags</label>
                    <input type="text" id="skillTags" placeholder="security, llm, audit" required />
                  </div>

                  <div class="form-group">
                    <label for="skillPrice">Price (SOL)</label>
                    <input type="number" id="skillPrice" placeholder="1.5" min="0" step="0.1" required />
                  </div>

                  <div class="form-group">
                    <label for="skillDesc">Description</label>
                    <textarea id="skillDesc" placeholder="Brief description of what this skill covers..." rows="3"></textarea>
                  </div>

                  <button class="btn btn-submit" type="submit" id="submitBtn" disabled>
                    UPLOAD SKILL
                  </button>
                </form>
              </div>
            </div>
          </div>

          <div class="upload-success" id="uploadSuccess" hidden>
            <div class="success-box pixel-box">
              <div class="success-title">SKILL UPLOADED</div>
              <p>Your skill has been added to the directory.</p>
              <button class="btn" id="uploadAnother">UPLOAD ANOTHER</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Skill Detail Modal -->
    <div class="skill-modal" id="skillModal" hidden>
      <div class="skill-modal-content pixel-box">
        <button class="modal-close" id="closeSkillModal">X</button>
        <div class="skill-modal-header">
          <span class="skill-tag" id="modalTag"></span>
          <span class="skill-price" id="modalPrice"></span>
        </div>
        <h2 id="modalTitle"></h2>
        <p id="modalDesc"></p>
        <div class="skill-modal-meta">
          <span>Creator: <strong id="modalCreator"></strong></span>
          <span>Downloads: <strong id="modalDownloads"></strong></span>
        </div>
        <div class="skill-modal-actions">
          <button class="btn btn-purchase" id="purchaseBtn">PURCHASE</button>
          <button class="btn btn-secondary btn-download" id="downloadBtn" hidden>DOWNLOAD</button>
        </div>
        <div class="purchase-status" id="purchaseStatus" hidden></div>
      </div>
    </div>

    <footer class="footer">
      <div class="container footer-inner">
        <div class="footer-logo">SKILLSTORE.MD</div>
        <div class="footer-links">
          <a href="/skills.json">skills.json</a>
          <a href="/skills.md">skills.md</a>
          <a href="mailto:hello@skillstore.md">contact</a>
        </div>
      </div>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
